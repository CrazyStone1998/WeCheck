# 接口文档

负责人：刘鹏昊

## 0
* baseurl : /api/v1/
* 返回形式：
  ```
  {
  "status":200,
  "message":"OK",
  "data":...
  }
  ```
  
  status类型：
  
  |status|description|
  |---|---|
  |200|success|
  |403|权限不足|
  
* 签到端和管理签到端公用一套接口，后台分别给予不同权限
* 权限说明 role  
  共有2种用户类型：
  
  | userType | description | code |
  | -------- | ----------- | ---- |
  | 签到端用户(u) |可以进行签到|0|
  | 管理端用户(m) |对签到端用户管理|1|
  
  **文中将会分别在每个接口后面标志以表示接口权限情况**
  * (u):需要为签到端
  * (m):需要为管理端
  * (u|m):需要为签到端或管理端管理端，即只要登录即可
  * 缺省:不需要任何权限

## 具体请求

### 登录注册

* #### 登陆
  ```
  POST /login
  ```
  ##### input
  |Name|Type|Description|
  |---|---|---|
  |username|string|用户名|  
  |password|string|密码|

* #### 注销
  ```
  POST /logout
  ```

* #### 注册
  ```
  POST /register
  ```
  ##### input
  
  |Name|Type|Description|
  |---|---|---|
  |userType|number|用户类型|
  |username|string|用户名|
  |username|string|密码|
  |name|string|姓名|
  |profile|file|本人正脸照片|
  
### 群体
一个群体由管理者创建，记录签到者的签到信息

* #### 获取群体信息(u|m)
  ```
  GET /group
  ```
  ##### parameters
  |Name|Type|Description|
  |---|---|---|
  |id|string|口令|
  ##### response
  如果用户未登录
  ```
  {
  "status":403,
  "message":"权限不足 请登录",
  "data":{
      "owner":"liupenghao"，//创建者username
      "name":"2016操作系统7班",//群体名称
  }
  }
  ```
  成功
  ```
  {
  "status":200,
  "message":"权限不足 请登录",
  "data":{
      "owner":"liupenghao"，//创建者username
      "name":"2016操作系统7班",//群体名称
  }
  }
  ```
  用户为管理者 且是该群体的管理者  需附加**members**
  ```
  {
  "status":200,
  "message":"权限不足 请登录",
  "data":{
      "owner":"liupenghao"，//创建者username
      "name":"2016操作系统7班",//群体名称
      "members":[
      {
        "username":"quyansong",
        "name":"曲延松"
      },
      ]
  }
  }
  ```
* #### 创建群体(m)
  ```
  POST /group/create
  ```
  ##### parameters
  |Name|Type|Description|
  |---|---|---|
  |name|string|群体名称|
  ##### response
  ```
  {
  "status":200,
  "message":"OK",
  "data":"Ojewexcin"//口令即id
  }
  ```
* #### 加入群体(u)
  ```
  POST /group/add
  ```
  ##### input
  |Name|Type|Description|
  |---|---|---|
  |id|string|群体口令|
* #### 退出群体(u)
  ```
  POST /group/quit
  ```
  ##### input
  |Name|Type|Description|
  |---|---|---|
  |id|string|群体口令|
* #### 删除群体(m)
  ```
  POST /group/delete
  ```
  ##### input
  |Name|Type|Description|
  |---|---|---|
  |id|string|群体口令|